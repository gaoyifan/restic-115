# 文件上传

### <font style="color:rgb(0, 0, 0);">基本信息</font>
**<font style="color:rgb(0, 0, 0);">Path：</font>**<font style="color:rgb(0, 0, 0);"> POST 域名 + /open/upload/init</font>

**<font style="color:rgb(0, 0, 0);">Method：</font>**<font style="color:rgb(0, 0, 0);"> POST</font>

**<font style="color:rgb(0, 0, 0);">接口描述：断点续传上传初始化调度接口</font>**

### <font style="color:rgb(0, 0, 0);">请求参数</font>
**<font style="color:rgb(0, 0, 0);">Headers</font>**

| **<font style="color:rgb(0, 0, 0);">参数名称</font>** | **<font style="color:rgb(0, 0, 0);">参数值</font>** | **<font style="color:rgb(0, 0, 0);">是否必须</font>** | **<font style="color:rgb(0, 0, 0);">示例</font>** |
| --- | --- | --- | --- |
| <font style="color:rgb(0, 0, 0);">Authorization</font> | <font style="color:rgb(0, 0, 0);">Bearer access_token</font> | <font style="color:rgb(0, 0, 0);">是</font> | <font style="color:rgb(26, 37, 53);background-color:rgb(227, 241, 254);">Bearer abcdefghijklmnopqrstuvwxyz </font> |




**<font style="color:rgb(0, 0, 0);">Body(form-data)</font>**

| **参数名称** | **是否必须** | **示例** | **备注** |
| --- | --- | --- | --- |
| file_name | 是 | 图片.jpg | 文件名 |
| file_size | 是 | 5335 | 文件大小(字节) |
| target | 是 | <font style="color:rgb(33, 33, 33);">U_1_0</font> | 文件上传目标约定 <br/><font style="color:rgb(33, 33, 33);">U_1_0</font> 其中<font style="color:rgb(33, 33, 33);">U_1_</font>是固定约定，0代表根目录，其他数字是文件夹ID |
| fileid | 是 | | 文件sha1值 |
| preid | 否 | | <font style="color:rgb(51, 51, 51);">文件前128Ksha1</font> |
| pick_code | 否 | | 上传任务key[非秒传的调度接口返回的pick_code字段] |
| topupload | 否 | 0 | 上传调度文件类型调度标记【0：单文件上传任务标识一条单独的文件上传记录 1：文件夹任务调度的第一个子文件上传请求标识一次文件夹上传记录。 2：文件夹任务调度的其余后续子文件不作记作单独上传的上传记录 -1：没有该参数】 |
| sign_key | 否 |  | 二次认证需要 |
| sign_val | 否 |  | 二次认证需要(大写) |


### 返回数据
| **名称** | **类型** | **备注** | **其他信息** |
| --- | --- | --- | --- |
| state | boolean | 状态；true：正常；false：错误 | |
| message | string | 异常信息 | |
| code | number | 异常码 | |
| data | object [] |  | item 类型: object |
| <font style="color:rgb(140, 138, 138);">├─</font> pick_code | string | 上传任务唯一ID,用于续传 | |
| <font style="color:rgb(140, 138, 138);">├─</font> status | number | 上传状态；1：非秒传；2：秒传 | |
| <font style="color:rgb(140, 138, 138);">├─</font> sign_key | string | 本次计算的sha1标识（二次认证 ） | 参照下面【二次认证】说明 |
| <font style="color:rgb(140, 138, 138);">├─</font> sign_check | string | 本次计算本地文件sha1区间范围（二次认证) | 参照下面【二次认证】说明 |
| <font style="color:rgb(140, 138, 138);">├─</font> file_id | string | 秒传成功返回的新增文件ID |  |
| <font style="color:rgb(140, 138, 138);">├─</font> target | string | 文件上传目标约定 |  |
| <font style="color:rgb(140, 138, 138);">├─ </font>bucket | string | 上传的bucket | |
| <font style="color:rgb(140, 138, 138);">├─ </font>object | string | OSS objectID | |
| <font style="color:rgb(140, 138, 138);">├─ </font>callback | object [] | 上传时间 | tem 类型: object |
| <font style="color:rgb(140, 138, 138);">├─</font>callback | string | <font style="color:rgb(51, 51, 51);">上传完回调信息</font> | |
| <font style="color:rgb(140, 138, 138);">├─</font>callback_var | string | <font style="color:rgb(51, 51, 51);">上传完回调参数</font> | |




### 二次认证
| code | **status** | **说明** | 后续处理 | 第二次验证 |
| --- | --- | --- | --- | --- |
| 700 | 6 | 签名认证后失败 | sign_check （用下划线隔开,截取上传文内容的sha1）(单位是byte)<br/>"sign_check": "2392148-2392298"<br/>取2392148-2392298之间的内容(包含2392148、2392298)的sha1<br/>例如：获取0-99字节（包含0和99）共100个字节 |    <br/>sign_key<br/>sign_val (根据sign_check计算的值大写的sha1值) |
| 701 | 7 | 需要认证签名 | | |
| 702 | 8 | 签名认证失败 | | |






> 更新: 2025-06-06 10:58:47  
> 原文: <https://www.yuque.com/115yun/open/ul4mrauo5i2uza0q>